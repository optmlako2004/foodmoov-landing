import{j as e,D as f,E as v,G as b,v as N}from"./index-BmAE37Kv.js";import{i as y,b as r,L as g}from"./vendor-qngJW-32.js";import{g as h}from"./blogCategories-BRSUQTEP.js";import"./icons-CjtwKXc6.js";function F(){const{slug:d}=y(),[l,m]=r.useState(null),[u,p]=r.useState(!0),[n,i]=r.useState(0);r.useEffect(()=>{async function s(){try{const o=await N.get(`/blog/posts/${d}`);m(o)}catch(o){console.error("Erreur lors du chargement de l'article:",o),m(null)}finally{p(!1)}}s()},[d]);const t=[];l?.post.main_image_url&&t.push({url:l.post.main_image_url,alt:l.post.title}),l?.slideshow_images?.length>0&&l.slideshow_images.forEach(s=>{t.push({url:s.image_url,alt:s.alt_text||l.post.title})});const c=r.useCallback(()=>{i(s=>s===t.length-1?0:s+1)},[t.length]),x=()=>{i(s=>s===0?t.length-1:s-1)};if(r.useEffect(()=>{if(t.length<=1)return;const s=setInterval(()=>{c()},4e3);return()=>clearInterval(s)},[n,c,t.length]),u)return e.jsx("div",{className:"post-loading",children:"Chargement..."});if(!l)return e.jsx("div",{className:"post-not-found",children:"Article introuvable"});const{post:a}=l,j=new Date(a.published_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});return e.jsxs("div",{className:"single-post-page",children:[e.jsx("title",{children:`${a.title} | Foodmoov`}),e.jsxs("div",{className:"post-container",children:[e.jsx("div",{className:"post-hero-section",children:t.length>0?e.jsxs("div",{className:"custom-slider",children:[e.jsx("img",{src:t[n].url,alt:t[n].alt,className:"slider-image"}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"slider-btn prev",onClick:x,children:e.jsx(f,{})}),e.jsx("button",{className:"slider-btn next",onClick:c,children:e.jsx(v,{})}),e.jsx("div",{className:"slider-dots",children:t.map((s,o)=>e.jsx("span",{className:`dot ${o===n?"active":""}`,onClick:()=>i(o)},o))})]})]}):e.jsx("div",{className:"no-image-banner",children:"Foodmoov Blog"})}),e.jsxs("div",{className:"post-header",children:[e.jsx(g,{to:`/blog?categorie=${a.category||"conseils"}`,className:"post-category-orig",style:{backgroundColor:h(a.category)?.color||"var(--primary-color)"},children:h(a.category)?.name||a.category||"Conseils"}),e.jsx("h1",{children:a.title}),e.jsxs("p",{className:"post-meta",children:["Par ",a.first_name," ",a.last_name," - ",j]})]}),e.jsx("div",{className:"post-content",dangerouslySetInnerHTML:{__html:a.body}}),e.jsxs(g,{to:"/blog",className:"back-to-blog-link",children:[e.jsx(b,{})," Retour au blog"]})]})]})}export{F as default};
