import{r as o,h as f,j as s,L as b,g as N}from"./index-DxnEfs_J.js";import{b as y,g as m,m as v}from"./blogCategories-Bhl1X6cR.js";function _(){const[n,h]=o.useState([]),[u,x]=o.useState(!0),[p,d]=f(),r=p.get("categorie")||"all";o.useEffect(()=>{async function e(){let t=[];try{t=await N.get("/blog/posts")}catch(i){console.error("Erreur serveur lors de la recuperation des articles:",i)}finally{const i=v.map(a=>({id:`mock-${a.id}`,title:a.title,slug:a.slug,category:a.category||"conseils",main_image_url:a.image,excerpt:a.excerpt,body:a.content,published_at:a.date,first_name:a.author,last_name:"",isMock:!0}));h([...t,...i]),x(!1)}}e()},[]);const l=r==="all"?n:n.filter(e=>(e.category||"conseils").toLowerCase()===r.toLowerCase()),c=e=>{d(e==="all"?{}:{categorie:e})},j=e=>{if(e.excerpt)return e.excerpt;const t=document.createElement("DIV");return t.innerHTML=e.body||"",(t.textContent||t.innerText||"").substring(0,150)+"..."},g=e=>{const t=m(e);return t?t.name:e};return u?s.jsx("div",{style:{textAlign:"center",padding:"100px"},children:"Chargement..."}):s.jsxs("div",{className:"blog-page",children:[s.jsx("title",{children:"Blog Street-Food - Conseils et Actualites | Foodmoov"}),s.jsxs("div",{className:"blog-page-header",children:[s.jsx("h1",{children:"Le Blog de la Street-Food"}),s.jsx("p",{children:"Retrouvez ici nos derniers articles, conseils et actualites sur le monde culinaire nomade."})]}),s.jsx("div",{className:"blog-categories",children:s.jsx("div",{className:"blog-categories-inner",children:y.map(e=>s.jsxs("button",{className:`category-btn ${r===e.id?"active":""}`,onClick:()=>c(e.id),style:{"--category-color":e.color},children:[e.name,r===e.id&&s.jsx("span",{className:"category-count",children:e.id==="all"?n.length:l.length})]},e.id))})}),r!=="all"&&s.jsxs("div",{className:"blog-filter-info",children:[s.jsxs("p",{children:[s.jsx("strong",{children:l.length})," article",l.length>1?"s":""," dans la categorie ",s.jsx("strong",{children:g(r)})]}),s.jsx("button",{className:"clear-filter",onClick:()=>c("all"),children:"Voir tous les articles"})]}),s.jsx("div",{className:"blog-list",children:l.length===0?s.jsxs("div",{className:"no-posts",children:[s.jsx("p",{children:"Aucun article dans cette categorie pour le moment."}),s.jsx("button",{className:"btn-primary",onClick:()=>c("all"),children:"Voir tous les articles"})]}):l.map(e=>s.jsxs(b,{to:`/blog/${e.slug}`,className:"post-card",children:[s.jsx("div",{className:"post-card-image-wrapper",children:e.main_image_url?s.jsx("img",{src:e.main_image_url,alt:e.title,className:"post-card-image"}):s.jsx("div",{style:{width:"100%",height:"100%",background:"#f0f0f0"}})}),s.jsxs("div",{className:"post-card-content",children:[s.jsx("span",{className:"post-category",style:{backgroundColor:m(e.category)?.color||"var(--primary-color)"},children:g(e.category)}),s.jsx("h2",{children:e.title}),s.jsx("p",{className:"excerpt",children:j(e)}),s.jsxs("div",{className:"post-card-footer",children:[s.jsx("div",{className:"author-info",children:s.jsxs("p",{className:"post-meta",children:["Par ",e.first_name," ",e.last_name]})}),s.jsx("span",{className:"read-more-link",children:"Lire la suite"})]})]})]},e.id))})]})}export{_ as default};
