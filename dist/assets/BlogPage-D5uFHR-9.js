import{j as s,v as p}from"./index-DX5041bd.js";import{b as c,h as j,L as f}from"./vendor-qngJW-32.js";import{b as N,g as m}from"./blogCategories-BRSUQTEP.js";import"./icons-CjtwKXc6.js";function k(){const[l,n]=c.useState([]),[g,h]=c.useState(!0),[x,o]=j(),t=x.get("categorie")||"all";c.useEffect(()=>{async function e(){try{const a=await p.get("/blog/posts");n(Array.isArray(a)?a:[])}catch(a){console.error("Erreur serveur lors de la recuperation des articles:",a),n([])}finally{h(!1)}}e()},[]);const r=t==="all"?l:l.filter(e=>(e.category||"foodtruckers").toLowerCase()===t.toLowerCase()),i=e=>{o(e==="all"?{}:{categorie:e})},u=e=>{if(e.excerpt)return e.excerpt;const a=document.createElement("DIV");return a.innerHTML=e.body||"",(a.textContent||a.innerText||"").substring(0,150)+"..."},d=e=>{const a=m(e);return a?a.name:e};return g?s.jsx("div",{style:{textAlign:"center",padding:"100px"},children:"Chargement..."}):s.jsxs("div",{className:"blog-page",children:[s.jsx("title",{children:"Blog Street-Food - Conseils et Actualites | Foodmoov"}),s.jsxs("div",{className:"blog-page-header",children:[s.jsx("h1",{children:"Le Blog de la Street-Food"}),s.jsx("p",{children:"Retrouvez ici nos derniers articles, conseils et actualites sur le monde culinaire nomade."})]}),s.jsx("div",{className:"blog-categories",children:s.jsx("div",{className:"blog-categories-inner",children:N.map(e=>s.jsxs("button",{className:`category-btn ${t===e.id?"active":""}`,onClick:()=>i(e.id),style:{"--category-color":e.color},children:[e.name,t===e.id&&s.jsx("span",{className:"category-count",children:e.id==="all"?l.length:r.length})]},e.id))})}),t!=="all"&&s.jsxs("div",{className:"blog-filter-info",children:[s.jsxs("p",{children:[s.jsx("strong",{children:r.length})," article",r.length>1?"s":""," dans la categorie ",s.jsx("strong",{children:d(t)})]}),s.jsx("button",{className:"clear-filter",onClick:()=>i("all"),children:"Voir tous les articles"})]}),s.jsx("div",{className:"blog-list",children:r.length===0?s.jsxs("div",{className:"no-posts",children:[s.jsx("p",{children:"Aucun article dans cette categorie pour le moment."}),s.jsx("button",{className:"btn-primary",onClick:()=>i("all"),children:"Voir tous les articles"})]}):r.map(e=>s.jsxs(f,{to:`/blog/${e.slug}`,className:"post-card",children:[s.jsx("div",{className:"post-card-image-wrapper",children:e.main_image_url?s.jsx("img",{src:e.main_image_url,alt:e.title,className:"post-card-image"}):s.jsx("div",{style:{width:"100%",height:"100%",background:"#f0f0f0"}})}),s.jsxs("div",{className:"post-card-content",children:[s.jsx("span",{className:"post-category",style:{backgroundColor:m(e.category)?.color||"var(--primary-color)"},children:d(e.category)}),s.jsx("h2",{children:e.title}),s.jsx("p",{className:"excerpt",children:u(e)}),s.jsxs("div",{className:"post-card-footer",children:[s.jsx("div",{className:"author-info",children:s.jsxs("p",{className:"post-meta",children:["Par ",e.first_name," ",e.last_name]})}),s.jsx("span",{className:"read-more-link",children:"Lire la suite"})]})]})]},e.id))})]})}export{k as default};
