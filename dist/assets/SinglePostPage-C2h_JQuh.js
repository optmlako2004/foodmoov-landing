import{b as v,j as e,D as b,E as y,G as _,c as N}from"./index-e0EmXN2B.js";import{i as F,b as r,L as g}from"./vendor-qngJW-32.js";import{g as p}from"./blogCategories-BRSUQTEP.js";import"./icons-CjtwKXc6.js";function k(){const{slug:m}=F(),h=v(),[a,d]=r.useState(null),[u,x]=r.useState(!0),[n,i]=r.useState(0);r.useEffect(()=>{async function o(){try{const l=await N.get(`/blog/posts/${m}`);d(l)}catch{h.error("Impossible de charger l'article"),d(null)}finally{x(!1)}}o()},[m]);const s=[];a?.post.main_image_url&&s.push({url:a.post.main_image_url,alt:a.post.title}),a?.slideshow_images?.length>0&&a.slideshow_images.forEach(o=>{s.push({url:o.image_url,alt:o.alt_text||a.post.title})});const c=r.useCallback(()=>{i(o=>o===s.length-1?0:o+1)},[s.length]),f=()=>{i(o=>o===0?s.length-1:o-1)};if(r.useEffect(()=>{if(s.length<=1)return;const o=setInterval(()=>{c()},4e3);return()=>clearInterval(o)},[n,c,s.length]),u)return e.jsx("div",{className:"post-loading",children:"Chargement..."});if(!a)return e.jsx("div",{className:"post-not-found",children:"Article introuvable"});const{post:t}=a,j=new Date(t.published_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});return e.jsxs("div",{className:"single-post-page",children:[e.jsx("title",{children:`${t.title} | Foodmoov`}),e.jsx("meta",{name:"description",content:t.excerpt||`${t.title} - Article du blog Foodmoov sur la street-food.`}),e.jsx("meta",{property:"og:title",content:`${t.title} | Foodmoov`}),e.jsx("meta",{property:"og:description",content:t.excerpt||`${t.title} - Article du blog Foodmoov.`}),e.jsx("meta",{property:"og:url",content:`https://foodmoov.com/blog/${t.slug}`}),e.jsx("meta",{property:"og:image",content:t.main_image_url||"https://foodmoov.com/logo.png"}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("link",{rel:"canonical",href:`https://foodmoov.com/blog/${t.slug}`}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Article",headline:t.title,image:t.main_image_url||"https://foodmoov.com/logo.png",datePublished:t.published_at,author:{"@type":"Person",name:`${t.first_name} ${t.last_name}`},publisher:{"@type":"Organization",name:"Foodmoov",logo:{"@type":"ImageObject",url:"https://foodmoov.com/logo.png"}},mainEntityOfPage:{"@type":"WebPage","@id":`https://foodmoov.com/blog/${t.slug}`}})}),e.jsxs("div",{className:"post-container",children:[e.jsx("div",{className:"post-hero-section",children:s.length>0?e.jsxs("div",{className:"custom-slider",children:[e.jsx("img",{src:s[n].url,alt:s[n].alt,className:"slider-image"}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"slider-btn prev",onClick:f,"aria-label":"Image précédente",children:e.jsx(b,{})}),e.jsx("button",{className:"slider-btn next",onClick:c,"aria-label":"Image suivante",children:e.jsx(y,{})}),e.jsx("div",{className:"slider-dots",children:s.map((o,l)=>e.jsx("span",{className:`dot ${l===n?"active":""}`,onClick:()=>i(l)},l))})]})]}):e.jsx("div",{className:"no-image-banner",children:"Foodmoov Blog"})}),e.jsxs("div",{className:"post-header",children:[e.jsx(g,{to:`/blog?categorie=${t.category||"conseils"}`,className:"post-category-orig",style:{backgroundColor:p(t.category)?.color||"var(--primary-color)"},children:p(t.category)?.name||t.category||"Conseils"}),e.jsx("h1",{children:t.title}),e.jsxs("p",{className:"post-meta",children:["Par ",t.first_name," ",t.last_name," - ",j]})]}),e.jsx("div",{className:"post-content",dangerouslySetInnerHTML:{__html:t.body}}),e.jsxs(g,{to:"/blog",className:"back-to-blog-link",children:[e.jsx(_,{})," Retour au blog"]})]})]})}export{k as default};
