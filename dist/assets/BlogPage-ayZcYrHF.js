import{b as j,j as e,c as f}from"./index-e0EmXN2B.js";import{b as c,h as b,L as y}from"./vendor-qngJW-32.js";import{b as v,g as m}from"./blogCategories-BRSUQTEP.js";import"./icons-CjtwKXc6.js";function A(){const g=j(),[a,n]=c.useState([]),[h,p]=c.useState(!0),[u,i]=b(),r=u.get("categorie")||"all";c.useEffect(()=>{async function s(){try{const t=await f.get("/blog/posts");n(Array.isArray(t)?t:[])}catch{g.error("Impossible de charger les articles"),n([])}finally{p(!1)}}s()},[]);const o=r==="all"?a:a.filter(s=>(s.category||"foodtruckers").toLowerCase()===r.toLowerCase()),l=s=>{i(s==="all"?{}:{categorie:s})},x=s=>{if(s.excerpt)return s.excerpt;const t=document.createElement("DIV");return t.innerHTML=s.body||"",(t.textContent||t.innerText||"").substring(0,150)+"..."},d=s=>{const t=m(s);return t?t.name:s};return h?e.jsx("div",{style:{textAlign:"center",padding:"100px"},children:"Chargement..."}):e.jsxs("div",{className:"blog-page",children:[e.jsx("title",{children:"Blog Street-Food - Conseils et Actualités | Foodmoov"}),e.jsx("meta",{name:"description",content:"Découvrez nos articles sur la street-food : conseils pour food truckers, tendances culinaires, guides pour entreprises et collectivités."}),e.jsx("meta",{property:"og:title",content:"Blog Street-Food - Conseils et Actualités | Foodmoov"}),e.jsx("meta",{property:"og:description",content:"Articles, conseils et actualités sur le monde de la street-food et des food trucks en France."}),e.jsx("meta",{property:"og:url",content:"https://foodmoov.com/blog"}),e.jsx("meta",{property:"og:image",content:"https://foodmoov.com/logo.png"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("link",{rel:"canonical",href:"https://foodmoov.com/blog"}),e.jsxs("div",{className:"blog-page-header",children:[e.jsx("h1",{children:"Le Blog de la Street-Food"}),e.jsx("p",{children:"Retrouvez ici nos derniers articles, conseils et actualites sur le monde culinaire nomade."})]}),e.jsx("div",{className:"blog-categories",children:e.jsx("div",{className:"blog-categories-inner",children:v.map(s=>e.jsxs("button",{className:`category-btn ${r===s.id?"active":""}`,onClick:()=>l(s.id),style:{"--category-color":s.color},children:[s.name,r===s.id&&e.jsx("span",{className:"category-count",children:s.id==="all"?a.length:o.length})]},s.id))})}),r!=="all"&&e.jsxs("div",{className:"blog-filter-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:o.length})," article",o.length>1?"s":""," dans la categorie ",e.jsx("strong",{children:d(r)})]}),e.jsx("button",{className:"clear-filter",onClick:()=>l("all"),children:"Voir tous les articles"})]}),e.jsx("div",{className:"blog-list",children:o.length===0?e.jsxs("div",{className:"no-posts",children:[e.jsx("p",{children:"Aucun article dans cette categorie pour le moment."}),e.jsx("button",{className:"btn-primary",onClick:()=>l("all"),children:"Voir tous les articles"})]}):o.map(s=>e.jsxs(y,{to:`/blog/${s.slug}`,className:"post-card",children:[e.jsx("div",{className:"post-card-image-wrapper",children:s.main_image_url?e.jsx("img",{src:s.main_image_url,alt:s.title,className:"post-card-image"}):e.jsx("div",{style:{width:"100%",height:"100%",background:"#f0f0f0"}})}),e.jsxs("div",{className:"post-card-content",children:[e.jsx("span",{className:"post-category",style:{backgroundColor:m(s.category)?.color||"var(--primary-color)"},children:d(s.category)}),e.jsx("h2",{children:s.title}),e.jsx("p",{className:"excerpt",children:x(s)}),e.jsxs("div",{className:"post-card-footer",children:[e.jsx("div",{className:"author-info",children:e.jsxs("p",{className:"post-meta",children:["Par ",s.first_name," ",s.last_name]})}),e.jsx("span",{className:"read-more-link",children:"Lire la suite"})]})]})]},s.id))})]})}export{A as default};
